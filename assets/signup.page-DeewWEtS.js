var P=Object.defineProperty,C=Object.defineProperties;var y=Object.getOwnPropertyDescriptors;var F=Object.getOwnPropertySymbols;var E=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable;var v=(e,t,a)=>t in e?P(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,o=(e,t)=>{for(var a in t||(t={}))E.call(t,a)&&v(e,a,t[a]);if(F)for(var a of F(t))L.call(t,a)&&v(e,a,t[a]);return e},n=(e,t)=>C(e,y(t));var w=(e,t,a)=>new Promise((u,m)=>{var f=r=>{try{i(a.next(r))}catch(c){m(c)}},g=r=>{try{i(a.throw(r))}catch(c){m(c)}},i=r=>r.done?u(r.value):Promise.resolve(r.value).then(f,g);i((a=a.apply(e,t)).next())});import{b4 as A,b5 as I,n as R,z as B,r as T,j as s,b6 as W,b7 as l,b8 as d,b9 as x,ba as j,bb as b,bc as h,bi as N,a8 as D,bd as M,o as q,q as z,B as H,L as O}from"./index-DCFn-PJE.js";import{A as U}from"./AuthLayout-BUFkal1Y.js";import{P as V}from"./Policy-Czx7qGTw.js";import{C as $}from"./checkbox-B4euYykp.js";import{P as S}from"./PassInputWithToggle-DbvdXZTE.js";import{o as G,s as p,e as J}from"./schemas-DolQb7Cl.js";import"./react-DaZ2_hLt.js";import"./ParallaxContainer-D5BA858C.js";import"./card-CHZCReWc.js";const K=G({email:J("Неверный email"),nickname:p().min(1,"Это обязательное поле"),name:p().min(1,"Введите имя. Позднее вы сможете изменить его в настройках аккаунта"),password:p().min(8,"Пароль должен содержать не менее 8 символов"),confirmPassword:p()}).refine(e=>e.password===e.confirmPassword,{path:["confirmPassword"],message:"Пароли не совпадают"});function Q(){var i;const e=A({resolver:I(K),defaultValues:{email:"",name:"",nickname:"",password:"",confirmPassword:""}}),{current:t,register:a}=R(),u=B(),[m,f]=T.useState(!1),g=r=>w(null,null,function*(){const{ok:c,errorMessage:k}=yield a(r);c||e.setError("root",{type:"custom",message:k}),t&&u(q(z.WISHES,{userId:t.$id}))});return s.jsx(W,n(o({},e),{children:s.jsxs("form",{className:"space-y-6",onSubmit:e.handleSubmit(g),children:[s.jsx(l,{control:e.control,name:"email",render:({field:r})=>s.jsxs(d,{children:[s.jsxs(x,{htmlFor:"email",children:["Email",s.jsx("span",{className:"text-destructive",children:"*"})]}),s.jsx(j,{children:s.jsx(b,n(o({placeholder:"example@gmail.com"},r),{id:"email",autoComplete:"true"}))}),s.jsx(h,{})]})}),s.jsx(l,{control:e.control,name:"nickname",render:({field:r})=>s.jsxs(d,{children:[s.jsxs(x,{htmlFor:"nickname",children:["Никнейм",s.jsx("span",{className:"text-destructive",children:"*"})]}),s.jsx(j,{children:s.jsx(b,n(o({},r),{id:"nickname",autoComplete:"off"}))}),s.jsx(N,{children:"Короткое имя, по которому друзья смогут найти ваш аккаунт"}),s.jsx(h,{})]})}),s.jsx(l,{control:e.control,name:"name",render:({field:r})=>s.jsxs(d,{children:[s.jsxs(x,{htmlFor:"name",children:["Полное имя",s.jsx("span",{className:"text-destructive",children:"*"})]}),s.jsx(j,{children:s.jsx(b,n(o({placeholder:"Василиса Премудрая"},r),{id:"name",autoComplete:"true"}))}),s.jsx(N,{children:"Можно изменить в настройках аккаунта позже"}),s.jsx(h,{})]})}),s.jsx(l,{control:e.control,name:"password",render:({field:r})=>s.jsxs(d,{children:[s.jsxs(x,{htmlFor:"password",children:["Пароль",s.jsx("span",{className:"text-destructive",children:"*"})]}),s.jsx(j,{children:s.jsx(S,n(o({},r),{id:"password"}))}),s.jsx(h,{})]})}),s.jsx(l,{control:e.control,name:"confirmPassword",render:({field:r})=>s.jsxs(d,{children:[s.jsxs(x,{htmlFor:"confirmPassword",children:["Повторите пароль",s.jsx("span",{className:"text-destructive",children:"*"})]}),s.jsx(j,{children:s.jsx(S,n(o({},r),{id:"password"}))}),s.jsx(h,{})]})}),e.formState.errors&&s.jsx("div",{className:"text-destructive text-sm",children:(i=e.formState.errors.root)==null?void 0:i.message}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx($,{id:"toggle",checked:m,onCheckedChange:r=>f(r),className:"bg-muted"}),s.jsxs(D,{htmlFor:"toggle",className:"inline font-normal cursor-pointer",children:["Я принимаю условия"," ",s.jsx(V,{text:"политики конфиденциальности",className:"inline underline"})," ",s.jsx("span",{className:"text-destructive",children:"*"})]})]}),s.jsx(M,{isSubmitting:e.formState.isSubmitting,isDirty:m,text:"Зарегистрироваться",className:"mt-4"})]})}))}function X(){return s.jsx(U,{title:"Регистрация в Wisharchive",description:"Создайте аккаунт и сохраняйте свои желания",form:s.jsx(Q,{}),footerText:s.jsxs(s.Fragment,{children:[s.jsx("p",{children:"Уже зарегистрированы?"}),s.jsx(H,{variant:"link",children:s.jsx(O,{to:"/login",children:"Войти в аккаунт"})})]})})}const is=X;export{is as Component};
