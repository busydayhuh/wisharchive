var w=Object.defineProperty,x=Object.defineProperties;var S=Object.getOwnPropertyDescriptors;var h=Object.getOwnPropertySymbols;var j=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable;var p=(r,t,s)=>t in r?w(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,E=(r,t)=>{for(var s in t||(t={}))j.call(t,s)&&p(r,s,t[s]);if(h)for(var s of h(t))A.call(t,s)&&p(r,s,t[s]);return r},W=(r,t)=>x(r,S(t));var l=(r,t,s)=>new Promise((d,a)=>{var m=e=>{try{n(s.next(e))}catch(o){a(o)}},i=e=>{try{n(s.throw(e))}catch(o){a(o)}},n=e=>e.done?d(e.value):Promise.resolve(e.value).then(m,i);n((s=s.apply(r,t)).next())});import{J as C,E as D,K as R,j as c,A as I,D as f,n as k,N as v}from"./index-ER8oZ0LV.js";import{E as y}from"./ErrorMessage-Ddw-rzTU.js";import{b as L}from"./react-number-format.es-D_tNmd85.js";import{W as U,a as b,n as H}from"./WishEditorSkeleton-CcbCLalj.js";import"./react-DaZ2_hLt.js";import"./schemas-DolQb7Cl.js";import"./uploadToStorage-B9axAW7k.js";import"./WishLayout-BNkZfisw.js";function M(){const{userId:r,isLoggedIn:t}=C(),{user:s,isLoading:d,error:a}=D(),{create:m}=L(),{navigateWithState:i}=R();function n(e){return l(this,null,function*(){if(!s||!r)return;const o=W(E({},H(e)),{ownerId:s.userId,owner:s.$id}),{ok:g,response:u}=yield m(o);if(!g){k("Не удалось создать желание");return}v("Желание создано",u.title,u.imageURL,{label:"Создать ещё",onClick:()=>i(f.ADD)}),i(I(f.WISH,{userId:o.ownerId,wishId:u.$id}),{wishTitle:u.title})})}return d?c.jsx(U,{}):a?c.jsx(y,{variant:"default",withButton:t,action:()=>i(I(f.WISHES,{userId:r}))}):c.jsx(b,{saveChanges:n})}const q=M;export{q as Component};
