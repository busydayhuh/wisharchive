var c=(u,m,e)=>new Promise((o,t)=>{var f=s=>{try{a(e.next(s))}catch(r){t(r)}},p=s=>{try{a(e.throw(s))}catch(r){t(r)}},a=s=>s.done?o(s.value):Promise.resolve(s.value).then(f,p);a((e=e.apply(u,m)).next())});import{n as g,O as E,m as l,j as n,v as x,w as j,o as w,q as I}from"./index-CMoUaIAy.js";import{E as d}from"./ErrorMessage-DwCpUaXx.js";import{u as R}from"./useWish-DS_8igBf.js";import{b as U}from"./react-number-format.es-DRwriqXX.js";import{W as v,a as S,n as L}from"./WishEditorSkeleton-h4nXs-lF.js";import"./react-DaZ2_hLt.js";import"./schemas-DolQb7Cl.js";import"./uploadToStorage-Do5hfno0.js";import"./WishLayout-DDKakPIl.js";function y(){const{userId:u}=g(),{update:m}=U(),{navigateWithState:e}=E(),{wishId:o}=l(),{wish:t,isLoading:f,error:p}=R(o!=null?o:null);function a(s,r){return c(this,null,function*(){if(!r)return;const h=L(s),{ok:W,response:i}=yield m(r,h);if(!W){x("Не удалось сохранить изменения");return}j("Сохранено",i.title,i.imageURL),e(w(I.WISH,{wishId:r,userId:i.ownerId}),{userId:i.ownerId,wishTitle:i.title})})}if(t&&u!==t.ownerId)return n.jsx(d,{variant:"no-access"});if(p)return n.jsx(d,{variant:"default"});if(f)return n.jsx(v,{});if(t)return n.jsx(S,{wish:t,saveChanges:a,storageImageURL:t.imageURL})}const D=y;export{D as Component};
