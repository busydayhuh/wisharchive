var b=Object.defineProperty,C=Object.defineProperties;var y=Object.getOwnPropertyDescriptors;var v=Object.getOwnPropertySymbols;var E=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable;var S=(e,t,a)=>t in e?b(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,o=(e,t)=>{for(var a in t||(t={}))E.call(t,a)&&S(e,a,t[a]);if(v)for(var a of v(t))A.call(t,a)&&S(e,a,t[a]);return e},n=(e,t)=>C(e,y(t));var w=(e,t,a)=>new Promise((u,m)=>{var f=r=>{try{i(a.next(r))}catch(c){m(c)}},g=r=>{try{i(a.throw(r))}catch(c){m(c)}},i=r=>r.done?u(r.value):Promise.resolve(r.value).then(f,g);i((a=a.apply(e,t)).next())});import{u as I,e as L,J as R,O as B,r as D,j as s,F as T,f as l,g as d,i as x,k as j,I as F,l as h,v as N,an as W,S as M,A as O,D as z,B as H,z as J}from"./index-ER8oZ0LV.js";import{A as U}from"./AuthLayout-DDcLlBvX.js";import{P as V}from"./Policy-BH1DSwd8.js";import{C as $}from"./checkbox-Cqs1l0wU.js";import{P as k}from"./PassInputWithToggle-Cvo4MpxU.js";import{o as q,s as p,e as G}from"./schemas-DolQb7Cl.js";import"./react-DaZ2_hLt.js";import"./ParallaxContainer-BDXSVRZX.js";import"./card-D5ex2cAF.js";const K=q({email:G("Неверный email"),nickname:p().min(1,"Это обязательное поле"),name:p().min(1,"Введите имя. Позднее вы сможете изменить его в настройках аккаунта"),password:p().min(8,"Пароль должен содержать не менее 8 символов"),confirmPassword:p()}).refine(e=>e.password===e.confirmPassword,{path:["confirmPassword"],message:"Пароли не совпадают"});function Q(){var i;const e=I({resolver:L(K),defaultValues:{email:"",name:"",nickname:"",password:"",confirmPassword:""}}),{current:t,register:a}=R(),u=B(),[m,f]=D.useState(!1),g=r=>w(null,null,function*(){const{ok:c,errorMessage:P}=yield a(r);c||e.setError("root",{type:"custom",message:P}),t&&u(O(z.WISHES,{userId:t.$id}))});return s.jsx(T,n(o({},e),{children:s.jsxs("form",{className:"space-y-6",onSubmit:e.handleSubmit(g),children:[s.jsx(l,{control:e.control,name:"email",render:({field:r})=>s.jsxs(d,{children:[s.jsxs(x,{htmlFor:"email",children:["Email",s.jsx("span",{className:"text-destructive",children:"*"})]}),s.jsx(j,{children:s.jsx(F,n(o({placeholder:"example@gmail.com"},r),{id:"email",autoComplete:"true"}))}),s.jsx(h,{})]})}),s.jsx(l,{control:e.control,name:"nickname",render:({field:r})=>s.jsxs(d,{children:[s.jsxs(x,{htmlFor:"nickname",children:["Никнейм",s.jsx("span",{className:"text-destructive",children:"*"})]}),s.jsx(j,{children:s.jsx(F,n(o({},r),{id:"nickname",autoComplete:"off"}))}),s.jsx(N,{children:"Короткое имя, по которому друзья смогут найти ваш аккаунт"}),s.jsx(h,{})]})}),s.jsx(l,{control:e.control,name:"name",render:({field:r})=>s.jsxs(d,{children:[s.jsxs(x,{htmlFor:"name",children:["Полное имя",s.jsx("span",{className:"text-destructive",children:"*"})]}),s.jsx(j,{children:s.jsx(F,n(o({placeholder:"Василиса Премудрая"},r),{id:"name",autoComplete:"true"}))}),s.jsx(N,{children:"Можно изменить в настройках аккаунта позже"}),s.jsx(h,{})]})}),s.jsx(l,{control:e.control,name:"password",render:({field:r})=>s.jsxs(d,{children:[s.jsxs(x,{htmlFor:"password",children:["Пароль",s.jsx("span",{className:"text-destructive",children:"*"})]}),s.jsx(j,{children:s.jsx(k,n(o({},r),{id:"password"}))}),s.jsx(h,{})]})}),s.jsx(l,{control:e.control,name:"confirmPassword",render:({field:r})=>s.jsxs(d,{children:[s.jsxs(x,{htmlFor:"confirmPassword",children:["Повторите пароль",s.jsx("span",{className:"text-destructive",children:"*"})]}),s.jsx(j,{children:s.jsx(k,n(o({},r),{id:"password"}))}),s.jsx(h,{})]})}),e.formState.errors&&s.jsx("div",{className:"text-destructive text-sm",children:(i=e.formState.errors.root)==null?void 0:i.message}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx($,{id:"toggle",checked:m,onCheckedChange:r=>f(r),className:"bg-muted"}),s.jsxs(W,{htmlFor:"toggle",className:"inline font-normal cursor-pointer",children:["Я принимаю условия"," ",s.jsx(V,{text:"политики конфиденциальности",className:"inline underline"})," ",s.jsx("span",{className:"text-destructive",children:"*"})]})]}),s.jsx(M,{isSubmitting:e.formState.isSubmitting,isDirty:m,text:"Зарегистрироваться",className:"mt-4"})]})}))}function X(){return s.jsx(U,{title:"Регистрация в Wisharchive",description:"Создайте аккаунт и сохраняйте свои желания",form:s.jsx(Q,{}),footerText:s.jsxs(s.Fragment,{children:[s.jsx("p",{children:"Уже зарегистрированы?"}),s.jsx(H,{variant:"link",children:s.jsx(J,{to:"/login",children:"Войти в аккаунт"})})]})})}const is=X;export{is as Component};
