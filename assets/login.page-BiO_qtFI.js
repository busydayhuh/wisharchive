var N=Object.defineProperty,C=Object.defineProperties;var E=Object.getOwnPropertyDescriptors;var v=Object.getOwnPropertySymbols;var k=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable;var S=(s,r,a)=>r in s?N(s,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[r]=a,n=(s,r)=>{for(var a in r||(r={}))k.call(r,a)&&S(s,a,r[a]);if(v)for(var a of v(r))L.call(r,a)&&S(s,a,r[a]);return s},m=(s,r)=>C(s,E(r));var h=(s,r,a)=>new Promise((i,c)=>{var d=o=>{try{l(a.next(o))}catch(u){c(u)}},t=o=>{try{l(a.throw(o))}catch(u){c(u)}},l=o=>o.done?i(o.value):Promise.resolve(o.value).then(d,t);l((a=a.apply(s,r)).next())});import{a as A,b as I,n as R,h as T,u as y,e as F,r as B,j as e,az as O,b0 as P,B as x,aA as V,aB as z,aC as W,aD as $,F as w,f as j,g as p,i as g,k as f,I as D,l as b,J as H,O as M,S as J,A as U,D as q,z as G}from"./index-D1Gt8aEI.js";import{A as K}from"./AuthLayout-D_3_PwA2.js";import{u as Q}from"./schemas-CovbQ7JT.js";import{P as X}from"./PassInputWithToggle-DRpV50es.js";import{o as Y,s as Z,e as _}from"./schemas-DolQb7Cl.js";import"./react-DaZ2_hLt.js";import"./ParallaxContainer-C5xTEiLk.js";import"./card-DIA6sF1A.js";function ee(s){return h(this,null,function*(){try{yield A.account.createRecovery(s.email,`${window.location.origin}/recovery`),I("Ссылка отправлена",`на ${s.email}`)}catch(r){return R("Не удалось отправить ссылку"),T(r)}})}function se(){const s=y({resolver:F(Q),defaultValues:{email:""}}),[r,a]=B.useState(!1);return e.jsxs(O,{open:r,onOpenChange:a,children:[e.jsx(P,{asChild:!0,children:e.jsx(x,{className:"font-normal text-muted-foreground text-sm",variant:"link",children:"Забыли пароль?"})}),e.jsxs(V,{children:[e.jsxs(z,{children:[e.jsx(W,{children:"Восстановление пароля"}),e.jsx($,{className:"sr-only",children:"Восстановление пароля"})]}),e.jsx("p",{children:"Введите свой email, чтобы получить ссылку на восстановление пароля:"}),e.jsx(w,m(n({},s),{children:e.jsxs("form",{className:"space-y-6",onSubmit:s.handleSubmit(i=>{ee(i),a(!1)}),children:[e.jsx(j,{control:s.control,name:"email",render:({field:i})=>e.jsxs(p,{children:[e.jsxs(g,{htmlFor:"email",children:["Ваш email",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(f,{children:e.jsx(D,n({id:"email"},i))}),e.jsx(b,{})]})}),e.jsx(x,{size:"xl",type:"submit",children:"Отправить"})]})}))]})]})}const re=Y({email:_("Неверный email"),password:Z("Введите пароль").min(8,"Пароль должен содержать не менее 8 символов")});function ae(){var d;const s=y({resolver:F(re),defaultValues:{email:"",password:""}}),{current:r,login:a}=H(),i=M(),c=t=>h(null,null,function*(){const{ok:l,errorMessage:o}=yield a(t);l||s.setError("root",{type:"custom",message:o}),r&&i(U(q.WISHES,{userId:r.$id}))});return e.jsxs("div",{className:"relative",children:[e.jsx(w,m(n({},s),{children:e.jsxs("form",{className:"space-y-4",onSubmit:s.handleSubmit(c),children:[e.jsx(x,{className:"bg-blue-bg/60 hover:bg-blue-bg/50 mb-6 rounded-3xl w-fit font-normal text-blue text-xs",onClick:t=>{t.preventDefault(),s.setValue("email","valeria.busyday@yandex.ru"),s.setValue("password","newpass!")},type:"button",children:"Войти в демо-аккаунт"}),e.jsx(j,{control:s.control,name:"email",render:({field:t})=>e.jsxs(p,{children:[e.jsx(g,{htmlFor:"email",children:"Email"}),e.jsx(f,{children:e.jsx(D,m(n({placeholder:"example@gmail.com"},t),{id:"email",autoComplete:"true"}))}),e.jsx(b,{})]})}),e.jsx(j,{control:s.control,name:"password",render:({field:t})=>e.jsxs(p,{children:[e.jsx(g,{htmlFor:"password",children:"Пароль"}),e.jsx(f,{children:e.jsx(X,m(n({},t),{id:"password"}))}),e.jsx(b,{})]})}),s.formState.errors&&e.jsx("div",{className:"text-destructive text-sm",children:(d=s.formState.errors.root)==null?void 0:d.message}),e.jsx(J,{isSubmitting:s.formState.isSubmitting,text:"Войти",className:"px-6"})]})})),e.jsx("div",{className:"right-0 bottom-1 absolute w-fit",children:e.jsx(se,{})})]})}function te(){return e.jsx(K,{title:"Вход в Wisharchive",description:e.jsx(e.Fragment,{children:e.jsx("p",{children:"Войдите в аккаунт, чтобы сохранить свои желания ✨"})}),form:e.jsx(ae,{}),footerText:e.jsxs(e.Fragment,{children:[e.jsx("p",{children:"Ещё нет аккаунта?"}),e.jsx(x,{variant:"link",children:e.jsx(G,{to:"/signup",children:"Зарегистрироваться"})})]})})}const he=te;export{he as Component};
