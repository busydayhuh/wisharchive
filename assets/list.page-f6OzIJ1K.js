var _e=Object.defineProperty,Se=Object.defineProperties;var Oe=Object.getOwnPropertyDescriptors;var O=Object.getOwnPropertySymbols;var ee=Object.prototype.hasOwnProperty,te=Object.prototype.propertyIsEnumerable;var H=(e,t,n)=>t in e?_e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,u=(e,t)=>{for(var n in t||(t={}))ee.call(t,n)&&H(e,n,t[n]);if(O)for(var n of O(t))te.call(t,n)&&H(e,n,t[n]);return e},v=(e,t)=>Se(e,Oe(t));var g=(e,t)=>{var n={};for(var s in e)ee.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(e!=null&&O)for(var s of O(e))t.indexOf(s)<0&&te.call(e,s)&&(n[s]=e[s]);return n};import{j as o,r as p,u as F,a as z,c as ce,b as V,d as le,P as S,R as j,e as Te,f as Me,g as E,C as Ee,h as Re,i as ne,E as ke,k as De,l as We,m as Le,n as Ue}from"./index-CMoUaIAy.js";import{u as $e}from"./useWishlist-DkUeEDpu.js";import{u as ze,C as Be,a as Fe}from"./Navigation-DrRGqhYd.js";import"./schemas-DolQb7Cl.js";import{a as Ve,b as Ge,C as Ke,c as qe,d as Ye,E as oe,B as se,D as Je,W as Qe,T as Xe}from"./DashboardLayout-d2OvtvBo.js";import{S as P}from"./react-number-format.es-DRwriqXX.js";import{S as re,P as Ze}from"./ShareOnSocials-3ffnCktW.js";import"./react-DaZ2_hLt.js";import"./useWish-DS_8igBf.js";import"./ErrorMessage-DwCpUaXx.js";import"./ru-DjLZO0yZ.js";import"./checkbox-DdfThZvn.js";import"./copyLink-C5nQ12cC.js";function He({wishlistId:e}){const{searchString:t,toolbarState:n}=Ve(),{wishes:s,isLoading:r,error:i,isValidating:a,size:d,setSize:l,reachedEnd:c}=ze({searchString:t,wishlistId:e,archived:!1,sort:n.sort,filters:n.filters},"wishlist",e);return Ge({loadMore:()=>l(d+1),disabled:a||c,offset:0}),o.jsx(Ke,{items:s,isLoading:r,error:i,isValidating:a,type:"wish"})}function et(e,t,{checkForDefaultPrevented:n=!0}={}){return function(r){if(e==null||e(r),n===!1||!r.defaultPrevented)return t==null?void 0:t(r)}}function tt(e,t,{checkForDefaultPrevented:n=!0}={}){return function(r){if(e==null||e(r),n===!1||!r.defaultPrevented)return t==null?void 0:t(r)}}function nt(e,t){return p.useReducer((n,s)=>{const r=t[n][s];return r!=null?r:n},e)}var de=e=>{const{present:t,children:n}=e,s=ot(t),r=typeof n=="function"?n({present:s.isPresent}):p.Children.only(n),i=F(s.ref,st(r));return typeof n=="function"||s.isPresent?p.cloneElement(r,{ref:i}):null};de.displayName="Presence";function ot(e){const[t,n]=p.useState(),s=p.useRef(null),r=p.useRef(e),i=p.useRef("none"),a=e?"mounted":"unmounted",[d,l]=nt(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return p.useEffect(()=>{const c=T(s.current);i.current=d==="mounted"?c:"none"},[d]),z(()=>{const c=s.current,f=r.current;if(f!==e){const x=i.current,C=T(c);e?l("MOUNT"):C==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(f&&x!==C?"ANIMATION_OUT":"UNMOUNT"),r.current=e}},[e,l]),z(()=>{var c;if(t){let f;const m=(c=t.ownerDocument.defaultView)!=null?c:window,x=b=>{const N=T(s.current).includes(CSS.escape(b.animationName));if(b.target===t&&N&&(l("ANIMATION_END"),!r.current)){const A=t.style.animationFillMode;t.style.animationFillMode="forwards",f=m.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=A)})}},C=b=>{b.target===t&&(i.current=T(s.current))};return t.addEventListener("animationstart",C),t.addEventListener("animationcancel",x),t.addEventListener("animationend",x),()=>{m.clearTimeout(f),t.removeEventListener("animationstart",C),t.removeEventListener("animationcancel",x),t.removeEventListener("animationend",x)}}else l("ANIMATION_END")},[t,l]),{isPresent:["mounted","unmountSuspended"].includes(d),ref:p.useCallback(c=>{s.current=c?getComputedStyle(c):null,n(c)},[])}}function T(e){return(e==null?void 0:e.animationName)||"none"}function st(e){var s,r;let t=(s=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(r=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var R="Collapsible",[rt,ue]=ce(R),[it,G]=rt(R),me=p.forwardRef((e,t)=>{const f=e,{__scopeCollapsible:n,open:s,defaultOpen:r,disabled:i,onOpenChange:a}=f,d=g(f,["__scopeCollapsible","open","defaultOpen","disabled","onOpenChange"]),[l,c]=V({prop:s,defaultProp:r!=null?r:!1,onChange:a,caller:R});return o.jsx(it,{scope:n,disabled:i,contentId:le(),open:l,onOpenToggle:p.useCallback(()=>c(m=>!m),[c]),children:o.jsx(S.div,v(u({"data-state":q(l),"data-disabled":i?"":void 0},d),{ref:t}))})});me.displayName=R;var pe="CollapsibleTrigger",fe=p.forwardRef((e,t)=>{const i=e,{__scopeCollapsible:n}=i,s=g(i,["__scopeCollapsible"]),r=G(pe,n);return o.jsx(S.button,v(u({type:"button","aria-controls":r.contentId,"aria-expanded":r.open||!1,"data-state":q(r.open),"data-disabled":r.disabled?"":void 0,disabled:r.disabled},s),{ref:t,onClick:tt(e.onClick,r.onOpenToggle)}))});fe.displayName=pe;var K="CollapsibleContent",xe=p.forwardRef((e,t)=>{const i=e,{forceMount:n}=i,s=g(i,["forceMount"]),r=G(K,e.__scopeCollapsible);return o.jsx(de,{present:n||r.open,children:({present:a})=>o.jsx(at,v(u({},s),{ref:t,present:a}))})});xe.displayName=K;var at=p.forwardRef((e,t)=>{const _=e,{__scopeCollapsible:n,present:s,children:r}=_,i=g(_,["__scopeCollapsible","present","children"]),a=G(K,n),[d,l]=p.useState(s),c=p.useRef(null),f=F(t,c),m=p.useRef(0),x=m.current,C=p.useRef(0),b=C.current,y=a.open||d,N=p.useRef(y),A=p.useRef(void 0);return p.useEffect(()=>{const h=requestAnimationFrame(()=>N.current=!1);return()=>cancelAnimationFrame(h)},[]),z(()=>{const h=c.current;if(h){A.current=A.current||{transitionDuration:h.style.transitionDuration,animationName:h.style.animationName},h.style.transitionDuration="0s",h.style.animationName="none";const I=h.getBoundingClientRect();m.current=I.height,C.current=I.width,N.current||(h.style.transitionDuration=A.current.transitionDuration,h.style.animationName=A.current.animationName),l(s)}},[a.open,s]),o.jsx(S.div,v(u({"data-state":q(a.open),"data-disabled":a.disabled?"":void 0,id:a.contentId,hidden:!y},i),{ref:f,style:u({"--radix-collapsible-content-height":x?`${x}px`:void 0,"--radix-collapsible-content-width":b?`${b}px`:void 0},e.style),children:y&&r}))});function q(e){return e?"open":"closed"}var ct=me,lt=fe,dt=xe,w="Accordion",ut=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[Y,mt,pt]=Te(w),[k,qt]=ce(w,[pt,ue]),J=ue(),he=j.forwardRef((e,t)=>{const a=e,{type:n}=a,s=g(a,["type"]),r=s,i=s;return o.jsx(Y.Provider,{scope:e.__scopeAccordion,children:n==="multiple"?o.jsx(gt,v(u({},i),{ref:t})):o.jsx(ht,v(u({},r),{ref:t}))})});he.displayName=w;var[ge,ft]=k(w),[be,xt]=k(w,{collapsible:!1}),ht=j.forwardRef((e,t)=>{const c=e,{value:n,defaultValue:s,onValueChange:r=()=>{},collapsible:i=!1}=c,a=g(c,["value","defaultValue","onValueChange","collapsible"]),[d,l]=V({prop:n,defaultProp:s!=null?s:"",onChange:r,caller:w});return o.jsx(ge,{scope:e.__scopeAccordion,value:j.useMemo(()=>d?[d]:[],[d]),onItemOpen:l,onItemClose:j.useCallback(()=>i&&l(""),[i,l]),children:o.jsx(be,{scope:e.__scopeAccordion,collapsible:i,children:o.jsx(ve,v(u({},a),{ref:t}))})})}),gt=j.forwardRef((e,t)=>{const f=e,{value:n,defaultValue:s,onValueChange:r=()=>{}}=f,i=g(f,["value","defaultValue","onValueChange"]),[a,d]=V({prop:n,defaultProp:s!=null?s:[],onChange:r,caller:w}),l=j.useCallback(m=>d((x=[])=>[...x,m]),[d]),c=j.useCallback(m=>d((x=[])=>x.filter(C=>C!==m)),[d]);return o.jsx(ge,{scope:e.__scopeAccordion,value:a,onItemOpen:l,onItemClose:c,children:o.jsx(be,{scope:e.__scopeAccordion,collapsible:!0,children:o.jsx(ve,v(u({},i),{ref:t}))})})}),[bt,D]=k(w),ve=j.forwardRef((e,t)=>{const C=e,{__scopeAccordion:n,disabled:s,dir:r,orientation:i="vertical"}=C,a=g(C,["__scopeAccordion","disabled","dir","orientation"]),d=j.useRef(null),l=F(d,t),c=mt(n),m=Me(r)==="ltr",x=et(e.onKeyDown,b=>{var X;if(!ut.includes(b.key))return;const y=b.target,N=c().filter($=>{var Z;return!((Z=$.ref.current)!=null&&Z.disabled)}),A=N.findIndex($=>$.ref.current===y),_=N.length;if(A===-1)return;b.preventDefault();let h=A;const I=0,W=_-1,L=()=>{h=A+1,h>W&&(h=I)},U=()=>{h=A-1,h<I&&(h=W)};switch(b.key){case"Home":h=I;break;case"End":h=W;break;case"ArrowRight":i==="horizontal"&&(m?L():U());break;case"ArrowDown":i==="vertical"&&L();break;case"ArrowLeft":i==="horizontal"&&(m?U():L());break;case"ArrowUp":i==="vertical"&&U();break}const Pe=h%_;(X=N[Pe].ref.current)==null||X.focus()});return o.jsx(bt,{scope:n,disabled:s,direction:r,orientation:i,children:o.jsx(Y.Slot,{scope:n,children:o.jsx(S.div,v(u({},a),{"data-orientation":i,ref:l,onKeyDown:s?void 0:x}))})})}),M="AccordionItem",[vt,Q]=k(M),Ce=j.forwardRef((e,t)=>{const m=e,{__scopeAccordion:n,value:s}=m,r=g(m,["__scopeAccordion","value"]),i=D(M,n),a=ft(M,n),d=J(n),l=le(),c=s&&a.value.includes(s)||!1,f=i.disabled||e.disabled;return o.jsx(vt,{scope:n,open:c,disabled:f,triggerId:l,children:o.jsx(ct,v(u(u({"data-orientation":i.orientation,"data-state":Ie(c)},d),r),{ref:t,disabled:f,open:c,onOpenChange:x=>{x?a.onItemOpen(s):a.onItemClose(s)}}))})});Ce.displayName=M;var je="AccordionHeader",Ne=j.forwardRef((e,t)=>{const a=e,{__scopeAccordion:n}=a,s=g(a,["__scopeAccordion"]),r=D(w,n),i=Q(je,n);return o.jsx(S.h3,v(u({"data-orientation":r.orientation,"data-state":Ie(i.open),"data-disabled":i.disabled?"":void 0},s),{ref:t}))});Ne.displayName=je;var B="AccordionTrigger",Ae=j.forwardRef((e,t)=>{const l=e,{__scopeAccordion:n}=l,s=g(l,["__scopeAccordion"]),r=D(w,n),i=Q(B,n),a=xt(B,n),d=J(n);return o.jsx(Y.ItemSlot,{scope:n,children:o.jsx(lt,v(u(u({"aria-disabled":i.open&&!a.collapsible||void 0,"data-orientation":r.orientation,id:i.triggerId},d),s),{ref:t}))})});Ae.displayName=B;var we="AccordionContent",ye=j.forwardRef((e,t)=>{const d=e,{__scopeAccordion:n}=d,s=g(d,["__scopeAccordion"]),r=D(w,n),i=Q(we,n),a=J(n);return o.jsx(dt,v(u(u({role:"region","aria-labelledby":i.triggerId,"data-orientation":r.orientation},a),s),{ref:t,style:u({"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)"},e.style)}))});ye.displayName=we;function Ie(e){return e?"open":"closed"}var Ct=he,jt=Ce,Nt=Ne,At=Ae,wt=ye;function yt(t){var e=g(t,[]);return o.jsx(Ct,u({"data-slot":"accordion"},e))}function It(n){var s=n,{className:e}=s,t=g(s,["className"]);return o.jsx(jt,u({"data-slot":"accordion-item",className:E("border-b last:border-b-0",e)},t))}function Pt(s){var r=s,{className:e,children:t}=r,n=g(r,["className","children"]);return o.jsx(Nt,{className:"flex",children:o.jsxs(At,v(u({"data-slot":"accordion-trigger",className:E("flex flex-1 justify-between items-start gap-2 disabled:opacity-50 pt-0 pb-4 focus-visible:border-ring rounded-md outline-none focus-visible:ring-[3px] focus-visible:ring-ring/50 max-w-fit text-muted-foreground text-sm text-left [&[data-state=open]>svg]:rotate-180 transition-all cursor-pointer disabled:pointer-events-none",e)},n),{children:[t,o.jsx(Ee,{className:"size-4 text-muted-foreground transition-transform translate-y-0.5 duration-200 pointer-events-none shrink-0"})]}))})}function _t(s){var r=s,{className:e,children:t}=r,n=g(r,["className","children"]);return o.jsx(wt,v(u({"data-slot":"accordion-content",className:"overflow-hidden text-sm data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down"},n),{children:o.jsx("div",{className:E("pt-0 pb-4",e),children:t})}))}function St({wishlist:e,userRoles:t}){var y,N;const n=Re(),{title:s,$id:r,isPrivate:i,description:a}=e,{isFavorite:d,toggleBookmark:l,collaborators:c,collabsError:f,collabsLoading:m}=qe(e),x=(t==null?void 0:t.isEditor)||(t==null?void 0:t.isWishlistOwner),{openDialog:C}=Ye(),b=()=>C("edit",e,t,c);return n?o.jsxs("div",{className:"space-y-4 mb-2",children:[o.jsx(ie,{title:s,isPrivate:i,isMobile:n}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx(ne,{collaborators:c,isLoading:m,error:f,wishlistId:r,isPrivate:i,isOwner:(y=t==null?void 0:t.isWishlistOwner)!=null?y:!1}),o.jsxs("div",{className:"flex items-center gap-1.5",children:[x&&o.jsx(oe,{onClick:b,variant:"page"}),o.jsx(re,{}),o.jsx(se,{variant:"gallery",isFavorite:d,onPressed:l,className:"bg-secondary"})]})]}),a&&o.jsx(ae,{text:a})]}):o.jsxs("div",{className:"space-y-4 mt-2 mb-3 lg:mb-5",children:[o.jsxs("div",{className:"flex justify-between items-center gap-4",children:[o.jsx(ie,{title:s,isPrivate:i,isMobile:n}),o.jsxs("div",{className:"flex items-center gap-2",children:[x&&o.jsx(oe,{onClick:b,variant:"page"}),o.jsx(re,{})]})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx(ne,{collaborators:c,isLoading:m,error:f,wishlistId:r,isPrivate:i,isOwner:(N=t==null?void 0:t.isWishlistOwner)!=null?N:!1}),o.jsx(se,{variant:"page",isFavorite:d,onPressed:l,className:"ms-auto"})]}),a&&o.jsx(ae,{text:a})]})}function ie({title:e,isPrivate:t,isMobile:n}){const s=n?o.jsx(ke,{}):"приватный",r=n?o.jsx(De,{}):"открытый";return o.jsxs("div",{className:"flex items-center gap-3 lg:gap-5",children:[o.jsx("p",{className:"font-headers font-bold text-2xl lg:text-3xl 2xl:text-4xl line-clamp-2 lg:line-clamp-none",children:e}),o.jsx("p",{className:E("inline-flex justify-center items-center px-1 md:px-2 py-1 rounded-full md:rounded-sm w-6 md:w-auto h-6 [&_svg]:size-3 text-xs",t?"bg-pink-bg text-pink-950":"bg-blue-bg text-blue"),children:t?s:r})]})}function ae({text:e}){return o.jsx(yt,{type:"single",collapsible:!0,children:o.jsxs(It,{value:"item-1",children:[o.jsx(Pt,{children:"Показать описание"}),o.jsx(_t,{children:e})]})})}function Ot({wishlist:e,roles:t}){return o.jsx(Je,{header:o.jsx(St,{wishlist:e,userRoles:t}),children:o.jsx(He,{wishlistId:e.$id})})}function Tt(){return o.jsxs("div",{className:"mt-4 md:mt-0 px-1 md:px-0",children:[o.jsxs("div",{className:"space-y-4 mt-2 mb-3 lg:mb-5",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx(P,{className:"w-[60%] h-5 md:h-6 lg:h-7 xl:h-9"}),o.jsx(P,{className:"size-9"})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx(We,{size:"md",maxVisible:3}),o.jsx(P,{className:"w-24 h-8"})]})]}),o.jsxs("div",{className:"flex justify-between items-center gap-2 mr-6 px-1.5 py-2 w-full",children:[o.jsx(P,{className:"w-40 h-9"}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(P,{className:"size-9"}),o.jsx(P,{className:"size-9"})]})]}),o.jsx(Be,{viewMode:"gallery",children:[...Array(5)].map((e,t)=>o.jsx(Qe,{viewMode:"gallery"},"wish-skeleton-"+t))})]})}function Mt(){const{listId:e}=Le(),{wishlist:t,isLoading:n,error:s}=$e(e!=null?e:null),{isLoggedIn:r,userId:i}=Ue(),{hasAccess:a,roles:d}=Fe("wishlist",t);return o.jsx(Ze,{item:t,isLoading:n,error:s,isLoggedIn:r,userId:i,hasAccess:a,skeleton:o.jsx(Tt,{}),children:l=>o.jsx(Xe,{dashboardType:"list",localStorageKey:`list+${e}`,children:o.jsx(Ot,{wishlist:l,roles:d})})})}const Yt=Mt;export{Yt as Component};
