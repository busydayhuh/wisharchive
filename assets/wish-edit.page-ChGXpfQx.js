var c=(u,m,e)=>new Promise((o,t)=>{var f=s=>{try{a(e.next(s))}catch(r){t(r)}},p=s=>{try{a(e.throw(s))}catch(r){t(r)}},a=s=>s.done?o(s.value):Promise.resolve(s.value).then(f,p);a((e=e.apply(u,m)).next())});import{J as g,K as E,M as l,j as n,n as x,N as j,A as I,D as R}from"./index-ER8oZ0LV.js";import{E as d}from"./ErrorMessage-Ddw-rzTU.js";import{u as U}from"./useWish-CDHYJy1-.js";import{b as w}from"./react-number-format.es-D_tNmd85.js";import{W as S,a as v,n as L}from"./WishEditorSkeleton-CcbCLalj.js";import"./react-DaZ2_hLt.js";import"./schemas-DolQb7Cl.js";import"./uploadToStorage-B9axAW7k.js";import"./WishLayout-BNkZfisw.js";function y(){const{userId:u}=g(),{update:m}=w(),{navigateWithState:e}=E(),{wishId:o}=l(),{wish:t,isLoading:f,error:p}=U(o!=null?o:null);function a(s,r){return c(this,null,function*(){if(!r)return;const h=L(s),{ok:W,response:i}=yield m(r,h);if(!W){x("Не удалось сохранить изменения");return}j("Сохранено",i.title,i.imageURL),e(I(R.WISH,{wishId:r,userId:i.ownerId}),{userId:i.ownerId,wishTitle:i.title})})}if(t&&u!==t.ownerId)return n.jsx(d,{variant:"no-access"});if(p)return n.jsx(d,{variant:"default"});if(f)return n.jsx(S,{});if(t)return n.jsx(v,{wish:t,saveChanges:a,storageImageURL:t.imageURL})}const J=y;export{J as Component};
