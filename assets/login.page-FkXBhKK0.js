var D=Object.defineProperty,E=Object.defineProperties;var C=Object.getOwnPropertyDescriptors;var v=Object.getOwnPropertySymbols;var L=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable;var y=(s,r,a)=>r in s?D(s,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[r]=a,n=(s,r)=>{for(var a in r||(r={}))L.call(r,a)&&y(s,a,r[a]);if(v)for(var a of v(r))T.call(r,a)&&y(s,a,r[a]);return s},c=(s,r)=>E(s,C(r));var u=(s,r,a)=>new Promise((i,m)=>{var d=o=>{try{l(a.next(o))}catch(h){m(h)}},t=o=>{try{l(a.throw(o))}catch(h){m(h)}},l=o=>o.done?i(o.value):Promise.resolve(o.value).then(d,t);l((a=a.apply(s,r)).next())});import{b3 as k,am as R,v as I,T as P,b4 as S,b5 as w,r as V,j as e,af as A,aJ as B,B as x,ag as O,ah as W,ai as $,aj as z,b6 as F,b7 as j,b8 as p,b9 as g,ba as f,bb as N,bc as b,n as H,z as M,bd as q,o as J,q as U,L as G}from"./index-CMoUaIAy.js";import{A as K}from"./AuthLayout-pKPX9KCS.js";import{u as Q}from"./schemas-CovbQ7JT.js";import{P as X}from"./PassInputWithToggle-D5Nd2iS6.js";import{o as Y,s as Z,e as _}from"./schemas-DolQb7Cl.js";import"./react-DaZ2_hLt.js";import"./ParallaxContainer-s-dAtX0H.js";import"./card-BE4tJbKu.js";function ee(s){return u(this,null,function*(){try{yield k.account.createRecovery(s.email,`${window.location.origin}/wisharchive/#/recovery`),R("Ссылка отправлена",`на ${s.email}`)}catch(r){return I("Не удалось отправить ссылку"),P(r)}})}function se(){const s=S({resolver:w(Q),defaultValues:{email:""}}),[r,a]=V.useState(!1);return e.jsxs(A,{open:r,onOpenChange:a,children:[e.jsx(B,{asChild:!0,children:e.jsx(x,{className:"font-normal text-muted-foreground text-sm",variant:"link",children:"Забыли пароль?"})}),e.jsxs(O,{children:[e.jsxs(W,{children:[e.jsx($,{children:"Восстановление пароля"}),e.jsx(z,{className:"sr-only",children:"Восстановление пароля"})]}),e.jsx("p",{children:"Введите свой email, чтобы получить ссылку на восстановление пароля:"}),e.jsx(F,c(n({},s),{children:e.jsxs("form",{className:"space-y-6",onSubmit:s.handleSubmit(i=>{ee(i),a(!1)}),children:[e.jsx(j,{control:s.control,name:"email",render:({field:i})=>e.jsxs(p,{children:[e.jsxs(g,{htmlFor:"email",children:["Ваш email",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(f,{children:e.jsx(N,n({id:"email"},i))}),e.jsx(b,{})]})}),e.jsx(x,{size:"xl",type:"submit",children:"Отправить"})]})}))]})]})}const re=Y({email:_("Неверный email"),password:Z("Введите пароль").min(8,"Пароль должен содержать не менее 8 символов")});function ae(){var d;const s=S({resolver:w(re),defaultValues:{email:"",password:""}}),{current:r,login:a}=H(),i=M(),m=t=>u(null,null,function*(){const{ok:l,errorMessage:o}=yield a(t);l||s.setError("root",{type:"custom",message:o}),r&&i(J(U.WISHES,{userId:r.$id}))});return e.jsxs("div",{className:"relative",children:[e.jsx(F,c(n({},s),{children:e.jsxs("form",{className:"space-y-4",onSubmit:s.handleSubmit(m),children:[e.jsx(x,{className:"bg-blue-bg/60 hover:bg-blue-bg/50 mb-6 rounded-3xl w-fit font-normal text-blue text-xs",onClick:t=>{t.preventDefault(),s.setValue("email","valeria.busyday@yandex.ru"),s.setValue("password","newpass!")},type:"button",children:"Войти в демо-аккаунт"}),e.jsx(j,{control:s.control,name:"email",render:({field:t})=>e.jsxs(p,{children:[e.jsx(g,{htmlFor:"email",children:"Email"}),e.jsx(f,{children:e.jsx(N,c(n({placeholder:"example@gmail.com"},t),{id:"email",autoComplete:"true"}))}),e.jsx(b,{})]})}),e.jsx(j,{control:s.control,name:"password",render:({field:t})=>e.jsxs(p,{children:[e.jsx(g,{htmlFor:"password",children:"Пароль"}),e.jsx(f,{children:e.jsx(X,c(n({},t),{id:"password"}))}),e.jsx(b,{})]})}),s.formState.errors&&e.jsx("div",{className:"text-destructive text-sm",children:(d=s.formState.errors.root)==null?void 0:d.message}),e.jsx(q,{isSubmitting:s.formState.isSubmitting,text:"Войти",className:"px-6"})]})})),e.jsx("div",{className:"right-0 bottom-1 absolute w-fit",children:e.jsx(se,{})})]})}function te(){return e.jsx(K,{title:"Вход в Wish archive",description:e.jsx(e.Fragment,{children:e.jsx("p",{children:"Войдите в аккаунт, чтобы сохранить свои желания ✨"})}),form:e.jsx(ae,{}),footerText:e.jsxs(e.Fragment,{children:[e.jsx("p",{children:"Ещё нет аккаунта?"}),e.jsx(x,{variant:"link",children:e.jsx(G,{to:"/signup",children:"Зарегистрироваться"})})]})})}const ue=te;export{ue as Component};
