var ye=Object.defineProperty,je=Object.defineProperties;var ke=Object.getOwnPropertyDescriptors;var _=Object.getOwnPropertySymbols;var Q=Object.prototype.hasOwnProperty,Y=Object.prototype.propertyIsEnumerable;var H=(t,e,o)=>e in t?ye(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o,p=(t,e)=>{for(var o in e||(e={}))Q.call(e,o)&&H(t,o,e[o]);if(_)for(var o of _(e))Y.call(e,o)&&H(t,o,e[o]);return t},v=(t,e)=>je(t,ke(e));var N=(t,e)=>{var o={};for(var n in t)Q.call(t,n)&&e.indexOf(n)<0&&(o[n]=t[n]);if(t!=null&&_)for(var n of _(t))e.indexOf(n)<0&&Y.call(t,n)&&(o[n]=t[n]);return o};var S=(t,e,o)=>new Promise((n,a)=>{var s=l=>{try{i(o.next(l))}catch(g){a(g)}},c=l=>{try{i(o.throw(l))}catch(g){a(g)}},i=l=>l.done?n(l.value):Promise.resolve(l.value).then(s,c);i((o=o.apply(t,e)).next())});import{n as M,z as oe,q as T,y as O,r as k,O as ne,o as G,aF as w,aD as X,aG as Ce,a2 as Ie,R as C,j as r,g as x,a1 as We,aO as Ne,C as we,b as L,P as E,aR as Te,aP as z,t as D,aS as K,I as se,v as R,w as A,B as ae,aN as Se,aQ as Pe,h as re,aT as Z,L as ie,aH as Ge,A as Re,aU as Ae,aV as _e,aW as $e,aX as Ee,aY as Me,aZ as Oe,a_ as Le,W as ze,ar as De,c as Fe,a$ as ce,b0 as Ve,f as Be,b1 as qe,m as He,b2 as J}from"./index-DCFn-PJE.js";import{c as Qe,b as Ye,d as Xe,S as Ke,C as Ze,N as Je}from"./react-number-format.es-BQzXxDu3.js";import"./schemas-DolQb7Cl.js";import{u as Ue}from"./useWish-DBqBimC9.js";function et(){const{isLoggedIn:t}=M(),e=oe();return o=>{if(!t){e(T.LOGIN);return}o()}}/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tt=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h2",key:"tvwodi"}],["path",{d:"M20 8v11a2 2 0 0 1-2 2h-2",key:"1gkqxj"}],["path",{d:"m9 15 3-3 3 3",key:"1pd0qc"}],["path",{d:"M12 12v9",key:"192myk"}]],ot=O("archive-restore",tt);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nt=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]],st=O("lock-open",nt);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const at=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],rt=O("pen",at);function le(t=[],e=[],o,n){return n?{isWishlistOwner:o===n,isReader:e.includes(n),isEditor:t.includes(n)}:{isWishlistOwner:!1,isReader:!1,isEditor:!1}}function it(t,e,o,n){if(!n)return{isWishlistOwner:!1,isReader:!1,isEditor:!1,isWishOwner:!1,isBooker:!1};let a;if(!t)a={isWishlistOwner:!1,isReader:!0,isEditor:e===n};else{const c=le(t.editorsIds,t.readersIds,t.ownerId,n);if(!c)return;a=c}const s={isWishOwner:n===e,isBooker:n===o};return p(p({},a),s)}function ct(t,e,o){return t?!e&&t?!1:e&&(o!=null&&o.isWishOwner||o!=null&&o.isWishlistOwner)?!0:e&&t?Object.values(o!=null?o:[]).some(n=>n):!0:!0}function At(t,e){const{userId:o}=M(),n=k.useMemo(()=>{if(e)return t==="wish"?it(e.wishlist,e.ownerId,e.bookerId,o):le(e.editorsIds,e.readersIds,e.ownerId,o)},[e,o,t]),a=k.useMemo(()=>{var s;return e?ct(e.isPrivate||((s=e.wishlist)==null?void 0:s.isPrivate),o,n):!1},[o,n,e]);return{roles:n,hasAccess:a}}function lt(t,e,o,n){const{location:a,params:s}=ne();return t==="wish"?{to:G(T.WISH,{wishId:e,userId:o}),state:{prevLocation:a.pathname,prevParams:s,data:n}}:{to:G(T.WISHLIST,{listId:e,userId:o}),state:{prevLocation:a.pathname,prevParams:s,data:n}}}const de=10;function dt(t,e){return S(this,null,function*(){const o=e?[...t,w.cursorAfter(e)]:[...t];return(yield Ce.wishes.list(o)).documents})}function _t(t,e="main-wishes",o){var u,f;const n=t?ut(t):null,a=`${e}+${o}`,s=(j,y)=>{var W,q;if(!t||y&&y.length===0)return null;if(j===0&&t)return["wishes",a,X(t)];const I=(q=(W=y==null?void 0:y.at(-1))==null?void 0:W.$id)!=null?q:null;return["wishes",a,X(t),I]},{data:c,isLoading:i,error:l,size:g,setSize:d,isValidating:m}=Qe(s,([,,,j])=>dt(n,j),{revalidateAll:!0,keepPreviousData:!0}),h=c==null?void 0:c.flat(),b=c&&((f=(u=c.at(-1))==null?void 0:u.length)!=null?f:0)<de;return{wishes:h,isLoading:i,error:l,size:g,setSize:d,isValidating:m,reachedEnd:b}}function ut(t){const e=[w.limit(t.limit||de)],o=t.filters&&t.filters.length>0?t.filters:null;return t!=null&&t.ownerId&&e.push(w.equal("ownerId",t.ownerId)),t.searchString&&e.push(w.contains("title",t.searchString)),t.wishlistId&&e.push(w.equal("wishlistId",t.wishlistId)),t.bookerId&&e.push(w.equal("bookerId",t.bookerId)),t.archived!==void 0&&e.push(w.equal("isArchived",t.archived)),t.sort&&e.push(t.sort.direction==="desc"?w.orderDesc(t.sort.field):w.orderAsc(t.sort.field)),o&&o.forEach(n=>{n.value!==void 0&&n.value!==null&&e.push(w.equal(n.key,n.value))}),e}function $t(t){const e=oe(),{$id:o,ownerId:n,title:a,wishlist:s}=t,{user:c}=Ie(n),i=lt("wish",o,n,{userName:c==null?void 0:c.userName,userId:c==null?void 0:c.userId,wishTitle:a,wlTitle:s==null?void 0:s.title});return{linkParams:i,onEditWish:()=>e(G(T.EDIT,{wishId:o}),{state:i.state})}}const Et=k.createContext(null),Mt=C.createContext(null);function Ot({viewMode:t,children:e,className:o}){if(t==="gallery")return r.jsx("div",{className:x("gap-4 grid grid-cols-2 md:grid-cols-3 2xl:grid-cols-5 xl:grid-cols-4",o),children:e});if(t==="table")return r.jsx("div",{className:x("gap-1 md:gap-2 grid grid-cols-1 -mt-2"),children:e})}function F(t){const{userId:e}=M(),{wish:o}=Ue(t),{update:n,deleteW:a}=Ye(),{updateSWRCache:s,addToCacheList:c,removeFromCacheList:i}=We(),l=k.useCallback(j=>S(null,[j],function*({mutation:u,patch:f}){const{ok:y}=yield u();return y?(f==null||f(),{ok:y}):{ok:y}}),[]),g=k.useCallback(u=>{const f={isBooked:u,bookerId:u?e:null,bookedBy:u?e:null},j=o?p(p({},o),f):void 0;return l({mutation:()=>n(t,f),patch:j?()=>s(`booked+${e}`,y=>u?c(y,j):i(y,t)):void 0})},[e,o,l,n,t,s,c,i]),d=k.useCallback(u=>{const f=!u,j={isArchived:f,wishlist:null,wishlistId:null,isBooked:!1,bookerId:null,bookedBy:null},y=o?p(p({},o),j):void 0;return l({mutation:()=>n(t,j),patch:y?()=>{f?s("wishes",I=>i(I,t)):s(`main-wishes+${e}`,I=>c(I,y)),s(`archived+${e}`,I=>f?c(I,y):i(I,t))}:void 0})},[o,l,n,t,s,e,i,c]),m=k.useCallback(()=>l({mutation:()=>a(t)}),[a,l,t]),h=k.useCallback(()=>{const u=o==null?void 0:o.wishlistId;return l({mutation:()=>n(t,{wishlistId:null,wishlist:null}),patch:()=>{s("wishlists",f=>f.map(j=>j.$id===u?v(p({},j),{wishes:i(j.wishes,t)}):j)),s(`wishlist+${u}`,f=>i(f,t))}})},[o==null?void 0:o.wishlistId,l,n,t,s,i]),b=k.useCallback((u,f)=>{const j=o==null?void 0:o.wishlistId,y=o?v(p({},o),{wishlistId:u,wishlist:f}):void 0;return l({mutation:()=>n(t,{wishlistId:u,wishlist:f}),patch:y&&u?()=>{s("wishlists",I=>I.map(W=>W.$id===j?v(p({},W),{wishes:i(W.wishes,t)}):W.$id===u?v(p({},W),{wishes:c(W.wishes,y)}):W))}:void 0})},[o,l,n,t,s,i,c]);return{bookWish:g,archiveWish:d,deleteWish:m,removeFromWishlist:h,changeWishlist:b}}function gt({onSelect:t,selectedValue:e,variant:o="dashboard",className:n}){const{navigateWithState:a}=ne(),{wishlists:s,isLoading:c,error:i,optionValue:l,options:g,selectedOption:d}=Xe(e),m=()=>{if(!(!d||d.value==="none"))return a(G(T.WISHLIST,{userId:d.ownerId,listId:d.value}),{userId:d.ownerId,wlTitle:d.label})};return c?r.jsx(Ke,{className:x("w-32 h-10",n)}):i?null:r.jsxs("div",{className:x("flex items-center rounded-md overflow-clip",n),children:[r.jsxs("button",{className:x("flex items-center gap-1.5 bg-secondary hover:bg-secondary/90 shadow-none px-1.5 py-1 pr-2 border-r-1 border-r-border/60 rounded-l-md h-10 font-normal",(d==null?void 0:d.value)!=="none"?"cursor-pointer":"text-muted-foreground"),onClick:m,children:[d==null?void 0:d.icon,r.jsx("span",{className:"max-w-[10ch] truncate",children:d==null?void 0:d.label})]}),r.jsx(Ne,{selectedValue:l,onSelect:h=>{const b=s==null?void 0:s.find(u=>u.$id===h);t(h,b)},options:g,renderSelected:()=>r.jsx("div",{className:"md:hidden",children:r.jsx(we,{className:"size-4 text-muted-foreground"})}),title:"Выберите список",triggerClassName:"h-10 bg-secondary rounded-r-md rounded-l-none flex items-center justify-center md:pl-0 py-5 px-2 md:pr-2 hover:bg-secondary/90 focus-visible:ring-0 focus-visible:border-0",contentClassName:x("max-h-md",o==="dashboard"&&"w-2xs")})]})}var ue="Toggle",V=k.forwardRef((t,e)=>{const l=t,{pressed:o,defaultPressed:n,onPressedChange:a}=l,s=N(l,["pressed","defaultPressed","onPressedChange"]),[c,i]=L({prop:o,onChange:a,defaultProp:n!=null?n:!1,caller:ue});return r.jsx(E.button,v(p({type:"button","aria-pressed":c,"data-state":c?"on":"off","data-disabled":t.disabled?"":void 0},s),{ref:e,onClick:Te(t.onClick,()=>{t.disabled||i(!c)})}))});V.displayName=ue;var pt=V;const ge=z("inline-flex items-center justify-center gap-2 rounded-md text-sm font-medium hover:bg-muted hover:text-muted-foreground disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 [&_svg]:shrink-0 focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] outline-none transition-[color,box-shadow] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive whitespace-nowrap",{variants:{variant:{default:"bg-transparent",outline:"border border-input bg-transparent shadow-xs hover:bg-accent hover:text-accent-foreground"},size:{default:"h-9 px-2 min-w-9",sm:"h-8 px-1.5 min-w-8",lg:"h-10 px-2.5 min-w-10"}},defaultVariants:{variant:"default",size:"default"}});function U(a){var s=a,{className:t,variant:e,size:o}=s,n=N(s,["className","variant","size"]);return r.jsx(pt,p({"data-slot":"toggle",className:x(ge({variant:e,size:o,className:t}))},n))}const ee=z("inline-flex justify-center items-center border-0 transition duration-300 cursor-pointer shrink-0",{variants:{triggerVariant:{gallery:"hover:bg-muted bg-secondary shadow-xs md:size-12 data-[state=on]:bg-primary data-[state=on]:text-background data-[state=on]:hover:bg-primary/90 hover:text-foreground ",page:"bg-primary text-primary-foreground hover:bg-primary/90 data-[state=on]:bg-secondary shadow-none hover:text-primary-foreground data-[state=on]:hover:bg-secondary/80 h-12 rounded-md px-6 has-[>svg]:px-4 rounded-4xl",table:"shadow-none bg-secondary text-foreground hover:bg-secondary/90 hover:text-foreground data-[state=on]:bg-primary data-[state=on]:text-background data-[state=on]:hover:bg-primary/90"}}}),ht=k.memo(function({wishId:e,triggerVariant:o="gallery",wishTitle:n,isBooked:a=!1,isBookedByCurrentUser:s,imageURL:c,className:i}){const{openConfDialog:l}=D(),{bookWish:g}=F(e),d=et(),m=()=>l({onConfirm:()=>S(null,null,function*(){const{ok:j}=yield g(!s);if(!j){R("Не удалось забронировать желание");return}A(s?"Бронь отменена":"Хочу подарить",n,c)}),action:"book",isActive:s}),h=a&&!s,b=a?s?"Отменить бронь":"Желание забронировано":"Забронировать желание",u=r.jsxs(U,{defaultPressed:s,className:x(ee({triggerVariant:o}),i),onPressedChange:()=>d(()=>m()),"aria-label":b,disabled:h,children:[s?r.jsx(st,{}):r.jsx(K,{}),b]}),f=r.jsx(se,{tooltipText:b,children:r.jsx(U,{defaultPressed:s,"aria-label":b,className:x(ee({triggerVariant:o}),i),onPressedChange:()=>d(()=>m()),children:r.jsx(K,{})})});return o==="page"?u:h?null:f});function Lt({price:t,currency:e="RUB",className:o}){const n=k.useMemo(()=>{var a;return(a=Ze.find(({abbr:s})=>s===e))==null?void 0:a.icon},[e]);return t?r.jsx(Je,{thousandSeparator:" ",decimalScale:0,value:t,displayType:"text",suffix:" "+n,className:x("shrink-0",o)}):null}function mt(t,e){const{$id:o,title:n,imageURL:a,wishlist:s}=t,{changeWishlist:c,removeFromWishlist:i}=F(o),{openConfDialog:l}=D(),g=k.useCallback(()=>l({action:"edit",onConfirm:()=>S(null,null,function*(){const{ok:m}=yield i();if(!m){R("Не удалось исключить желание");return}A("Желание исключено из списка",n,a!=null?a:void 0)}),name:s==null?void 0:s.title,isOwner:e==null?void 0:e.isWishOwner}),[a,l,i,e==null?void 0:e.isWishOwner,n,s==null?void 0:s.title]),d=k.useCallback((m,h)=>S(null,null,function*(){var u;const{ok:b}=yield c(m==="none"?null:m,h);if(!b){R("Не удалось переместить желание");return}A("Перемещено в",(u=h==null?void 0:h.title)!=null?u:"Без списка",a!=null?a:void 0)}),[c,a]);return{remove:g,move:d}}function ft({onRemove:t,variant:e,className:o}){return r.jsxs(ae,{onClick:t,size:"icon",variant:"secondary",className:x(o,e==="gallery"&&"aspect-square",e==="table"&&"px-2.5","h-9 md:h-9"),"aria-label":"Убрать из списка",children:[r.jsx(Se,{}),e==="table"&&"Убрать"]})}function zt({wish:t,roles:e,wishlist:o,className:n,variant:a="gallery"}){var g;const{move:s,remove:c}=mt(t,e),i=Pe(T.WISHLIST),l=re();return e!=null&&e.isWishOwner&&!i?l&&a==="gallery"?r.jsx(r.Fragment,{children:o?r.jsx(Z,{id:o.$id,title:o.title,className:n,isPrivate:o.isPrivate,ownerId:o.ownerId}):null}):r.jsx(gt,{selectedValue:(g=o==null?void 0:o.$id)!=null?g:"none",onSelect:s,className:n}):(e!=null&&e.isEditor||e!=null&&e.isWishlistOwner||e!=null&&e.isWishOwner)&&i?r.jsx(ft,{onRemove:c,variant:a,className:n}):o&&!i?r.jsx(Z,{id:o.$id,title:o.title,className:n,isPrivate:o.isPrivate,ownerId:o.ownerId}):null}function Dt({userId:t,userName:e,avatarURL:o,className:n,size:a="sm"}){const s={sm:"text-xs",md:"text-sm",lg:"text-base"};return r.jsx(ie,{to:G(T.WISHES,{userId:t!=null?t:""}),children:r.jsxs("div",{className:x("flex items-center gap-1 -mt-1",n),children:[r.jsx(Ge,{name:e,avatarURL:o!=null?o:void 0,size:a,id:t}),r.jsx("p",{className:x("max-w-[18ch] font-medium truncate owner-name",s[a]),children:e})]})})}function vt({title:t,imageURL:e,isArchived:o,wishId:n,onEditWish:a}){const{archiveWish:s,deleteWish:c}=F(n),i=()=>S(null,null,function*(){const{ok:g}=yield s(o);if(!g)return R("Не удалось переместить в архив");A(o?"Восстановлено":"Перенесено в архив",t,e)}),l=()=>S(null,null,function*(){const{ok:g}=yield c();if(!g)return R("Не удалось удалить желание");A("Удалено",t,e)});return[{title:o?"Вернуть из архива":"В архив",icon:o?r.jsx(ot,{}):r.jsx(Re,{}),action:i,actionName:"archive",isActive:o,confirmation:!0},{title:"Редактировать",icon:r.jsx(rt,{}),action:a,actionName:"edit",confirmation:!1},{title:"Удалить",icon:r.jsx(Ae,{}),action:l,actionName:"delete",confirmation:!0}]}const xt=z("inline-flex justify-center items-center border-0 rounded-sm size-9 text-foreground text-sm transition duration-300 cursor-pointer shrink-0",{variants:{triggerVariant:{gallery:"bg-secondary hover:bg-muted",page:"bg-muted hover:bg-muted/60",table:"bg-secondary hover:bg-secondary/80 shadow-none lg:mx-auto ms-auto me-1 data-[state=open]:bg-muted"}}});function bt({wishId:t,title:e,imageURL:o,onEditWish:n,isArchived:a=!1,align:s="end",side:c="top",triggerVariant:i="gallery",className:l}){const g=re(),{openConfDialog:d}=D(),m=vt({wishId:t,title:e,imageURL:o,isArchived:a,onEditWish:n}),h=u=>u.confirmation?requestAnimationFrame(()=>{d({onConfirm:u.action,action:u.actionName,isActive:u.isActive,name:e})}):u.action(),b=i==="gallery"&&!g;return r.jsx(r.Fragment,{children:b?r.jsx(jt,{title:e,items:m,wishId:t,handleItemSelect:h,className:l}):r.jsx(yt,{wishId:t,items:m,align:s,side:c,triggerVariant:i,className:l,handleItemSelect:h})})}function yt({wishId:t,items:e,align:o,side:n,triggerVariant:a,handleItemSelect:s,className:c}){return r.jsxs(_e,{children:[r.jsx($e,{className:x(xt({triggerVariant:a}),c),children:r.jsx(Ee,{className:"size-4"})}),r.jsx(Me,{className:"bg-secondary w-56",align:o,side:n,children:r.jsx(Oe,{children:e.map(i=>r.jsxs(Le,{onSelect:()=>s(i),"aria-label":i.title,className:"flex gap-2 [&_svg]:stroke-[1.5px] cursor-pointer",children:[i.icon," ",i.title]},t+i.actionName))})})]})}function jt({wishId:t,handleItemSelect:e,items:o,className:n}){return r.jsx("div",{className:x("flex gap-2",n),children:o.map(a=>r.jsx(se,{tooltipText:a.title,children:r.jsx(ae,{size:"icon",variant:"secondary",onClick:()=>e(a),children:a.icon})},t+a.actionName))})}const Ft=k.memo(function({wish:e,meta:o}){var l,g,d,m,h,b;const{linkParams:n,isMobile:a,userRoles:s,onEditWish:c,onListPage:i}=o;return r.jsxs("div",{className:x("relative rounded-2xl overflow-hidden"),children:[r.jsx(ie,{to:n.to,state:n.state,children:r.jsx(ze,{wishId:e.$id,isPrivate:(g=(l=e.wishlist)==null?void 0:l.isPrivate)!=null?g:!1,withBlur:!i,url:e.imageURL,alt:e.title,variant:"gallery",isBooked:e.isBooked})}),((d=e.wishlist)==null?void 0:d.isPrivate)&&a&&r.jsx("div",{className:"top-2 left-2 absolute flex justify-center items-center rounded-full w-6 h-6 overflow-clip",children:De.private}),s&&r.jsx("div",{className:x("right-0 bottom-0 absolute flex justify-end has-only:justify-end gap-1 p-3 w-fit"),children:s.isWishOwner?r.jsx(bt,{imageURL:(m=e.imageURL)!=null?m:void 0,wishId:e.$id,triggerVariant:"gallery",side:"top",align:"start",isArchived:e.isArchived,title:e.title,onEditWish:c,className:"transition-all duration-300 show-actions"}):r.jsx(ht,{wishTitle:e.title,imageURL:(h=e.imageURL)!=null?h:void 0,wishId:e.$id,triggerVariant:"gallery",isBooked:e.isBooked,isBookedByCurrentUser:(b=s==null?void 0:s.isBooker)!=null?b:!1})})]})});var P="ToggleGroup",[pe,Vt]=Fe(P,[ce]),he=ce(),B=C.forwardRef((t,e)=>{const a=t,{type:o}=a,n=N(a,["type"]);if(o==="single"){const s=n;return r.jsx(kt,v(p({},s),{ref:e}))}if(o==="multiple"){const s=n;return r.jsx(Ct,v(p({},s),{ref:e}))}throw new Error(`Missing prop \`type\` expected on \`${P}\``)});B.displayName=P;var[me,fe]=pe(P),kt=C.forwardRef((t,e)=>{const l=t,{value:o,defaultValue:n,onValueChange:a=()=>{}}=l,s=N(l,["value","defaultValue","onValueChange"]),[c,i]=L({prop:o,defaultProp:n!=null?n:"",onChange:a,caller:P});return r.jsx(me,{scope:t.__scopeToggleGroup,type:"single",value:C.useMemo(()=>c?[c]:[],[c]),onItemActivate:i,onItemDeactivate:C.useCallback(()=>i(""),[i]),children:r.jsx(ve,v(p({},s),{ref:e}))})}),Ct=C.forwardRef((t,e)=>{const d=t,{value:o,defaultValue:n,onValueChange:a=()=>{}}=d,s=N(d,["value","defaultValue","onValueChange"]),[c,i]=L({prop:o,defaultProp:n!=null?n:[],onChange:a,caller:P}),l=C.useCallback(m=>i((h=[])=>[...h,m]),[i]),g=C.useCallback(m=>i((h=[])=>h.filter(b=>b!==m)),[i]);return r.jsx(me,{scope:t.__scopeToggleGroup,type:"multiple",value:c,onItemActivate:l,onItemDeactivate:g,children:r.jsx(ve,v(p({},s),{ref:e}))})});B.displayName=P;var[It,Wt]=pe(P),ve=C.forwardRef((t,e)=>{const h=t,{__scopeToggleGroup:o,disabled:n=!1,rovingFocus:a=!0,orientation:s,dir:c,loop:i=!0}=h,l=N(h,["__scopeToggleGroup","disabled","rovingFocus","orientation","dir","loop"]),g=he(o),d=Be(c),m=p({role:"group",dir:d},l);return r.jsx(It,{scope:o,rovingFocus:a,disabled:n,children:a?r.jsx(qe,v(p({asChild:!0},g),{orientation:s,dir:d,loop:i,children:r.jsx(E.div,v(p({},m),{ref:e}))})):r.jsx(E.div,v(p({},m),{ref:e}))})}),$="ToggleGroupItem",xe=C.forwardRef((t,e)=>{const o=fe($,t.__scopeToggleGroup),n=Wt($,t.__scopeToggleGroup),a=he(t.__scopeToggleGroup),s=o.value.includes(t.value),c=n.disabled||t.disabled,i=v(p({},t),{pressed:s,disabled:c}),l=C.useRef(null);return n.rovingFocus?r.jsx(Ve,v(p({asChild:!0},a),{focusable:!c,active:s,ref:l,children:r.jsx(te,v(p({},i),{ref:e}))})):r.jsx(te,v(p({},i),{ref:e}))});xe.displayName=$;var te=C.forwardRef((t,e)=>{const l=t,{__scopeToggleGroup:o,value:n}=l,a=N(l,["__scopeToggleGroup","value"]),s=fe($,o),c={role:"radio","aria-checked":t.pressed,"aria-pressed":void 0},i=s.type==="single"?c:void 0;return r.jsx(V,v(p(p({},i),a),{ref:e,onPressedChange:g=>{g?s.onItemActivate(n):s.onItemDeactivate(n)}}))}),Nt=B,wt=xe;const be=k.createContext({size:"default",variant:"default"});function Bt(s){var c=s,{className:t,variant:e,size:o,children:n}=c,a=N(c,["className","variant","size","children"]);return r.jsx(Nt,v(p({"data-slot":"toggle-group","data-variant":e,"data-size":o,className:x("group/toggle-group flex items-center data-[variant=outline]:shadow-xs rounded-md w-fit",t)},a),{children:r.jsx(be.Provider,{value:{variant:e,size:o},children:n})}))}function qt(s){var c=s,{className:t,children:e,variant:o,size:n}=c,a=N(c,["className","children","variant","size"]);const i=k.useContext(be);return r.jsx(wt,v(p({"data-slot":"toggle-group-item","data-variant":i.variant||o,"data-size":i.size||n,className:x(ge({variant:i.variant||o,size:i.size||n}),"min-w-0 flex-1 shrink-0 rounded-none shadow-none first:rounded-l-md last:rounded-r-md focus:z-10 focus-visible:z-10 data-[variant=outline]:border-l-0 data-[variant=outline]:first:border-l",t)},a),{children:e}))}const Ht=k.memo(function(){const{userId:e}=He(),o=({isActive:n})=>x("hover:bg-transparent px-2 py-1 font-semibold text-muted-foreground hover:text-foreground text-sm transition-all duration-300",n&&"pointer-events-none border-b-3 border-b-foreground text-foreground");return e?r.jsxs("div",{className:"flex gap-1 px-1 w-fit",children:[r.jsx(J,{className:o,to:{pathname:G(T.WISHES,{userId:e}),search:"?view=profile"},children:"желания"}),r.jsx(J,{className:o,to:{pathname:G(T.WISHLISTS,{userId:e}),search:"?view=profile"},children:"списки"})]}):null});export{ot as A,ht as B,Ot as C,Et as D,Lt as F,Ht as N,Dt as O,bt as Q,Mt as R,U as T,zt as W,At as a,F as b,$t as c,lt as d,Ft as e,et as f,Bt as g,qt as h,_t as u};
