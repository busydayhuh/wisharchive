var g=Object.defineProperty,x=Object.defineProperties;var S=Object.getOwnPropertyDescriptors;var h=Object.getOwnPropertySymbols;var j=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable;var p=(r,t,s)=>t in r?g(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,W=(r,t)=>{for(var s in t||(t={}))j.call(t,s)&&p(r,s,t[s]);if(h)for(var s of h(t))v.call(t,s)&&p(r,s,t[s]);return r},l=(r,t)=>x(r,S(t));var w=(r,t,s)=>new Promise((d,a)=>{var m=o=>{try{n(s.next(o))}catch(e){a(e)}},i=o=>{try{n(s.throw(o))}catch(e){a(e)}},n=o=>o.done?d(o.value):Promise.resolve(o.value).then(m,i);n((s=s.apply(r,t)).next())});import{n as A,bj as C,O as R,j as c,o as E,q as f,v as b,w as k}from"./index-DCFn-PJE.js";import{E as y}from"./ErrorMessage-D9efNVJr.js";import{b as D}from"./react-number-format.es-BQzXxDu3.js";import{W as L,a as U,n as H}from"./WishEditorSkeleton-Cf7mzVy6.js";import"./react-DaZ2_hLt.js";import"./schemas-DolQb7Cl.js";import"./uploadToStorage-Cy7716JI.js";import"./WishLayout-CmMKzxfh.js";function M(){const{userId:r,isLoggedIn:t}=A(),{user:s,isLoading:d,error:a}=C(),{create:m}=D(),{navigateWithState:i}=R();function n(o){return w(this,null,function*(){if(!s||!r)return;const e=l(W({},H(o)),{ownerId:s.userId,owner:s.$id}),{ok:I,response:u}=yield m(e);if(!I){b("Не удалось создать желание");return}k("Желание создано",u.title,u.imageURL,{label:"Создать ещё",onClick:()=>i(f.ADD)}),i(E(f.WISH,{userId:e.ownerId,wishId:u.$id}),{wishTitle:u.title})})}return d?c.jsx(L,{}):a?c.jsx(y,{variant:"default",withButton:t,action:()=>i(E(f.WISHES,{userId:r}))}):c.jsx(U,{saveChanges:n})}const J=M;export{J as Component};
